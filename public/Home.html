
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    :root {
        --primary-color: #0875e1;  /* Deep blue */
        --secondary-color: #f7f9fc;  /* Light background */
        --accent-color: #0875e1;  /* Accent blue */
        --highlight-color: #ffc107;  /* Gold highlight */
        --danger-color: #dc3545;  /* Red for error/warnings */
        --white: #ffffff;  /* White */
        --shadow: rgba(0, 0, 0, 0.1);  /* Subtle shadow */
    }
    
    body {
        font-family: 'Arial', sans-serif;
        background-color: var(--secondary-color);  /* Light background */
        color: #333;  /* Dark text for readability */
        margin: 0;
        padding: 0;
    }
    
    /* Navbar styling */
    .navbar {
        background: var(--primary-color);
        padding: 10px 20px;
        box-shadow: 0 4px 8px var(--shadow-color);
    }
    
    .navbar-brand {
        color: var(--white);
        font-size: 1.8em;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .navbar-nav .nav-link {
        color: var(--white);
        margin: 0 10px;
        transition: color var(--transition-speed);
    }
    
    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link.active {
        color: var(--highlight-color);
        font-weight: bold;
    }
    
     
    
    .sign-out:hover {
        color: var(--white);
    }
    .summary-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 40px;
    flex-wrap: wrap; 
    padding: 20px;
    background-color: var(--secondary-color);
    margin-top: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 8px var(--shadow-color);
    animation: fadeInUp 1s ease-in-out;
   
}

.summary-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    width: 280px;
    border-radius: 12px;
    color: var(--text-dark);
    box-shadow: 0 2px 6px var(--shadow-color);
    text-align: center;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    animation: fadeInUp 1s ease-in-out;
   border:2px solid red;
}

.summary-box:hover {
    transform: translateY(-10px);
    box-shadow: 0 6px 12px var(--shadow-color);
}

.summary-box h3 {
    font-size: 1.6em;
    font-weight: bold;
    color: var(--text-dark);
    margin-top: 10px;
    text-transform: uppercase;
}

.summary-box p {
    font-size: 2.5em;
    font-weight: bold;
    margin: 10px 0;
    color: var(--highlight-color);
}
</style>    
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="/Home">
                <img src="./Images/Sips Finance Logo.png" alt="Logo" width="60" height="60" class="me-2">
                <div>
                    <span style="display: block;">Sips Finance</span>
                </div>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="goto()">Apply Jobs</a>
                    </li>
               
                </ul>
                <div class="d-flex align-items-center ms-3 " >
                    <a href="/" class="sign-out btn btn-danger">Sign Out</a>
                </div>
            </div>
        </div>
    </nav>
    <div id="main">

        <div class="container mt-5">
           
            <div class="summary-container">
                <div id="InvestmentTotal" class="summary-box investment">
                    <h3>Applied</h3>
                    <p id="Applied"><span class="highlight"></span></p>
                </div>
                <div id="OrderTotal" class="summary-box order">
                    <h3><span>Selected</span></h3>
                    <p id="Selected"><span class="highlight"></span></p>
            </div>
            <div id="OrderTotal" class="summary-box order">
                <h3><span>Rejected</span></h3>
                <p id="Rejected"><span class="highlight"></span></p>
        </div>

        <div class="container mt-4">
            <h1>My Applications</h1>
            <input type="text" id="ApplicationSearch" class="form-control mb-3" placeholder="Search Application By Status,Name" onkeyup="searchApplicationLeads()">
       
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">S.No</th>
                        <th scope="col">Company Name</th>
                        <th scope="col">Position</th>
                        <th scope="col">Salary</th>
                        <th scope="col">Applied Date</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody id="tbody">
                    <!-- Dynamic content will be added here -->
                </tbody>
            </table>

    </div>
    <a class="btn btn-primary" id="EditProfile">Edit Profile</a>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
     const ApplicantName =window.location.pathname.split('/').pop(); 
     
        document.getElementById('EditProfile').href = `/EditProfilePage/${ApplicantName}`;
async function fetchData() {
    try {
        const ApplicationResponse = await fetch(`/ApplicationData/${ApplicantName}`);
        if (!ApplicationResponse.ok) {
            throw new Error('Network response was not ok');
        }

        const ApplicationData = await ApplicationResponse.json();
        console.log(ApplicationData);

        // Update summary counts
        const totalApplied = ApplicationData.length;
        const totalSelected = ApplicationData.filter(app => app.Status.toLowerCase() === 'selected').length;
        const totalRejected = ApplicationData.filter(app => app.Status.toLowerCase() === 'rejected').length;

        document.getElementById('Applied').textContent = totalApplied;
        document.getElementById('Selected').textContent = totalSelected;
        document.getElementById('Rejected').textContent = totalRejected;

        // Populate the table
        const ApplicationTbody = document.getElementById('tbody');
        ApplicationTbody.innerHTML = ''; // Clear previous data

        ApplicationData.forEach((Application, index) => {
            const statusColor = getStatusColor(Application.Status); // Get color based on status
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${Application.Company}</td>
                <td>${Application.JobRole}</td>
                <td>${Application.Salary}</td>
                <td>${Application.AppliedDate.split('T')[0]}</td>
                <td style="color: ${statusColor}; font-weight: bold;">${Application.Status}</td>
            `;
            ApplicationTbody.appendChild(row);
        });

        // Store data for search functionality
        window.ApplicationData = ApplicationData;

    } catch (error) {
        console.error('Error fetching data:', error);
        const ApplicationTbody = document.getElementById('tbody');
        ApplicationTbody.innerHTML = '<tr><td colspan="6">Error loading data.</td></tr>';
    }
}

// Search functionality
function searchApplicationLeads() {
    const searchInput = document.getElementById('ApplicationSearch').value.toLowerCase();
    const filteredData = window.ApplicationData.filter(app => 
        app.Company.toLowerCase().includes(searchInput) ||
        app.Status.toLowerCase().includes(searchInput) ||
        app.JobRole.toLowerCase().includes(searchInput)
    );

    const ApplicationTbody = document.getElementById('tbody');
    ApplicationTbody.innerHTML = ''; // Clear previous data

    filteredData.forEach((Application, index) => {
        const statusColor = getStatusColor(Application.Status); // Get color based on status
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${Application.Company}</td>
            <td>${Application.JobRole}</td>
            <td>${Application.Salary}</td>
            <td>${Application.AppliedDate.split('T')[0]}</td>
            <td style="color: ${statusColor}; font-weight: bold;">${Application.Status}</td>
        `;
        ApplicationTbody.appendChild(row);
    });

    if (filteredData.length === 0) {
        ApplicationTbody.innerHTML = '<tr><td colspan="6">No results found.</td></tr>';
    }
}

// Function to determine color based on status
function getStatusColor(status) {
    switch (status.toLowerCase()) {
        case 'selected':
            return '#27ae60'; // Green for selected
        case 'rejected':
            return '#e74c3c'; // Red for rejected
        case 'pending':
            return '#f39c12'; // Amber for pending
        default:
            return '#5f6f81'; // Neutral gray for unknown status
    }
}

// Initialize data fetch
fetchData();

function goto(){
    window.location.href = `/DisplayJobsPage/${ApplicantName}`;
}



</script>
</body>
</html>