
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
         :root {
            --primary-color: #0056b3; /* Richer deep blue */
            --secondary-color: #eef3f8; /* Softer light background */
            --accent-color: #1a73e8; /* Vibrant blue accent */
            --highlight-color: #f0a500; /* Warmer gold highlight */
            --danger-color: #e63946; /* Bold red for error/warnings */
            --text-dark: #212529; /* Slightly lighter dark text */
            --text-light: #6c757d; /* Muted text color */
            --shadow: rgba(0, 0, 0, 0.15); /* Enhanced shadow */
            --card-shadow: rgba(0, 0, 0, 0.25); /* Stronger shadow for cards */
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
        }

        #main {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            padding: 20px;
        }

        /* Navbar styling */
        .navbar {
            background: var(--primary-color);
            box-shadow: 0 4px 8px var(--shadow);
            padding: 10px 20px;
        }

        .navbar-brand {
            color: var(--highlight-color);
            font-size: 2em;
            font-weight: bold;
            letter-spacing: 1.5px;
        }

        .navbar-nav .nav-link {
            color: var(--secondary-color);
            font-size: 1.1em;
            margin: 0 15px;
            transition: color 0.3s ease-in-out;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: var(--highlight-color);
            font-weight: bold;
        }

        .sign-out {
            background-color: var(--danger-color);
            color: var(--secondary-color);
            border-radius: 5px;
            padding: 8px 16px;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s ease-in-out;
        }

        .sign-out:hover {
            background-color: var(--highlight-color);
        }

        /* Summary Container Styling */
        .summary-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            padding: 40px;
            margin-top: 30px;
        }

        .summary-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            width: 320px;
            height: 200px;
            border-radius: 16px;
            background-color: var(--white);
            color: var(--text-dark);
            box-shadow: 0 6px 12px var(--card-shadow);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .summary-box:hover {
            transform: translateY(-12px);
            box-shadow: 0 10px 20px var(--card-shadow);
        }

        .summary-box h3 {
            font-size: 1.6em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .summary-box p {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--highlight-color);
            margin: 0;
        }

</style>    
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="/AdminDashboard">
                <img src="./Images/Sips Finance Logo.png" alt="Logo" width="60" height="60" class="me-2">
                <div>
                    <span style="display: block;">Sips Finance</span>
                </div>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="/AdminDashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/Companies">Companies</a>
                    </li>
               
                </ul>
                <div class="d-flex align-items-center ms-3 " >
                    <a href="/" class="sign-out btn btn-danger">Sign Out</a>
                </div>
            </div>
        </div>
    </nav>
    <div id="main" >

        <div class="container mt-5">
           
            <div class="summary-container">
                <div id="InvestmentTotal" class="summary-box investment">
                    <h3><a href="/Companies">Companies</a></h3>
                    <p id="investmentValue"><span class="highlight">0</span></p>
                </div>
                <div id="OrderTotal" class="summary-box order">
                    <h3><a href="/Applications">Applications</a></h3>
                    <p id="orderValueApplications"><span class="highlight">0</span></p>
                </div>
                <div id="OrderTotal" class="summary-box order">
                    <h3><a href="/AllApplicantsPage">Applicants</a></h3>
                    <p id="orderValueApplicants"><span class="highlight">0</span></p>
                </div>
                <div id="OrderTotal" class="summary-box order">
                    <h3>Actively Placed</h3>
                    <p id="orderValuePlaced"><span class="highlight">0</span></p>
                </div>
                <div id="OrderTotal" class="summary-box order">
                    <h3>Expected Business</h3>
                    <p id="orderValueExpected"><span class="highlight">0</span></p>
                </div>
            </div>
            


    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script>

async function fetchCompanyData() {
    try {
        const response = await fetch('/companiesdata');
        if (!response.ok) throw new Error('Failed to fetch company data');

        const companyData = await response.json();
        const companiesSet = new Set();

        // Iterate through the company data to track unique companies
        companyData.forEach(company => companiesSet.add(company.CompanyName));

        // Update the Companies count dynamically
        document.getElementById('investmentValue').innerHTML = `<span class="highlight">${companiesSet.size}</span>`;
    } catch (error) {
        console.error('Error fetching company data:', error);
    }
}

async function fetchApplicantData() {
    try {
        const response = await fetch('/TotalApplicationData');
        if (!response.ok) throw new Error('Failed to fetch applicant data');

        const applicantData = await response.json();

        // Initialize metrics
        let applicationsCount = 0;
        let applicantsSet = new Set();
        let placedCount = 0;
        let totalExpectedSalary = 0;

        // Iterate through the applicant data
        applicantData.forEach(application => {
            applicationsCount++; // Count total applications
            applicantsSet.add(application.ApplicantName); // Track unique applicants
            if (application.Status === 'Placed') {
                placedCount++; 
                totalExpectedSalary += application.Salary; // Sum up expected salary for placed applicants
            }
        });

        // Update the summary boxes dynamically
        document.getElementById('orderValueApplications').innerHTML = `<span class="highlight">${applicationsCount}</span>`;
        document.getElementById('orderValueApplicants').innerHTML = `<span class="highlight">${applicantsSet.size}</span>`;
        document.getElementById('orderValuePlaced').innerHTML = `<span class="highlight">${placedCount}</span>`;
        document.getElementById('orderValueExpected').innerHTML = `<span class="highlight">${totalExpectedSalary}Rs</span>`;
    } catch (error) {
        console.error('Error fetching applicant data:', error);
    }
}

// Call the functions to fetch and display data
fetchCompanyData();
fetchApplicantData();


</script>
</body>
</html>